<?xml version="1.0" encoding="UTF-8"?>
<record_update table="wf_workflow_version">
    <wf_workflow_version action="INSERT_OR_UPDATE">
        <active>false</active>
        <activity_stages>{"ends":["8ce657140f76ea006c3005cce1050e4d"],"subflows":[],"stages":{},"activities":{}}</activity_stages>
        <after_business_rules>false</after_business_rules>
        <checked_out/>
        <checked_out_by/>
        <column_renderer display_value="Workflow-driven">a56213111b030100adca1e094f0713ac</column_renderer>
        <condition table="sn_customerservice_registration">emailISNOTEMPTY^EQ<item endquery="false" field="email" goto="false" newquery="false" operator="ISNOTEMPTY" or="false" value=""/>
            <item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/>
        </condition>
        <condition_type>run_match</condition_type>
        <description>This workflow will trigger for new API key registrations to the API customer portal.</description>
        <expected_sequences>5ce657140f76ea006c3005cce1050e53,8ce657140f76ea006c3005cce1050e4c,80e657140f76ea006c3005cce1050e50,8ce657140f76ea006c3005cce1050e4d|5ce657140f76ea006c3005cce1050e53,8ce657140f76ea006c3005cce1050e4c,80e657140f76ea006c3005cce1050e50,90e657140f76ea006c3005cce1050e54</expected_sequences>
        <expected_time>1970-01-01 14:00:00</expected_time>
        <expected_time_type/>
        <full_sequences>5ce657140f76ea006c3005cce1050e53,8ce657140f76ea006c3005cce1050e4c,18e697140f76ea006c3005cce1050e8c,c0e657140f76ea006c3005cce1050e4c,48e657140f76ea006c3005cce1050e4b,8ce657140f76ea006c3005cce1050e4d|5ce657140f76ea006c3005cce1050e53,8ce657140f76ea006c3005cce1050e4c,18e697140f76ea006c3005cce1050e8c,c0e657140f76ea006c3005cce1050e4c,48e657140f76ea006c3005cce1050e4b,5ce657140f76ea006c3005cce1050e52,08e657140f76ea006c3005cce1050e4f,8ce657140f76ea006c3005cce1050e4d|5ce657140f76ea006c3005cce1050e53,8ce657140f76ea006c3005cce1050e4c,18e697140f76ea006c3005cce1050e8c,c0e657140f76ea006c3005cce1050e4c,48e657140f76ea006c3005cce1050e4b,5ce657140f76ea006c3005cce1050e52,08e657140f76ea006c3005cce1050e4f,0ce657140f76ea006c3005cce1050e50,8ce657140f76ea006c3005cce1050e4d|5ce657140f76ea006c3005cce1050e53,8ce657140f76ea006c3005cce1050e4c,18e697140f76ea006c3005cce1050e8c,c0e657140f76ea006c3005cce1050e4c,48e657140f76ea006c3005cce1050e4b,5ce657140f76ea006c3005cce1050e52,08e657140f76ea006c3005cce1050e4f,0ce657140f76ea006c3005cce1050e50,40e657140f76ea006c3005cce1050e4e,8ce657140f76ea006c3005cce1050e4d|5ce657140f76ea006c3005cce1050e53,8ce657140f76ea006c3005cce1050e4c,18e697140f76ea006c3005cce1050e8c,c0e657140f76ea006c3005cce1050e4c,48e657140f76ea006c3005cce1050e4b,5ce657140f76ea006c3005cce1050e52,8ce657140f76ea006c3005cce1050e4d|5ce657140f76ea006c3005cce1050e53,8ce657140f76ea006c3005cce1050e4c,80e657140f76ea006c3005cce1050e50,8ce657140f76ea006c3005cce1050e4d|5ce657140f76ea006c3005cce1050e53,8ce657140f76ea006c3005cce1050e4c,80e657140f76ea006c3005cce1050e50,90e657140f76ea006c3005cce1050e54,8ce657140f76ea006c3005cce1050e4d</full_sequences>
        <journal/>
        <max_activity_count>100</max_activity_count>
        <name>Customer Registration v2</name>
        <not_cacheable>false</not_cacheable>
        <on_cancel><![CDATA[// This script executes if the workflow is cancelled.// The global variable context_sys_id contains the sys_id of the cancelled workflow context.]]></on_cancel>
        <order>100</order>
        <pin_type>set_by_activity</pin_type>
        <published>true</published>
        <relative_duration/>
        <requires_ert>true</requires_ert>
        <run_multiple>false</run_multiple>
        <schedule/>
        <stage_field/>
        <stage_order>computed</stage_order>
        <start display_value="Begin">5ce657140f76ea006c3005cce1050e53</start>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>00e657140f76ea006c3005cce1050e4b</sys_id>
        <sys_mod_count>6</sys_mod_count>
        <sys_updated_by>shilpa.tisgaonkar@snc</sys_updated_by>
        <sys_updated_on>2016-11-01 18:16:47</sys_updated_on>
        <table>sn_customerservice_registration</table>
        <timezone/>
        <validated>true</validated>
        <workflow display_value="Customer Registration v2">e5bdc68c0f76aa006c3005cce1050e93</workflow>
    </wf_workflow_version>
    <wf_workflow action="INSERT_OR_UPDATE">
        <access>public</access>
        <description>This workflow will trigger for new API key registrations to the API customer portal.</description>
        <name>Customer Registration v2</name>
        <preview/>
        <sys_class_name>wf_workflow</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-26 13:03:22</sys_created_on>
        <sys_customer_update>true</sys_customer_update>
        <sys_domain>global</sys_domain>
        <sys_id>e5bdc68c0f76aa006c3005cce1050e93</sys_id>
        <sys_mod_count>2</sys_mod_count>
        <sys_name>Customer Registration v2</sys_name>
        <sys_overrides/>
        <sys_package display_value="Solara Admin Console" source="x_wec_solara_admin">5ef3dfa60fbdea006c3005cce1050ec2</sys_package>
        <sys_policy/>
        <sys_replace_on_upgrade>false</sys_replace_on_upgrade>
        <sys_scope display_value="Solara Admin Console">5ef3dfa60fbdea006c3005cce1050ec2</sys_scope>
        <sys_update_name>wf_workflow_e5bdc68c0f76aa006c3005cce1050e93</sys_update_name>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 11:45:35</sys_updated_on>
        <table>sn_customerservice_registration</table>
        <template>false</template>
        <vars/>
    </wf_workflow>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Notification">0a6c97790a0a0b2756919eb960284334</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>3</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>API Key Registration Started</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>10e697140f76ea006c3005cce1050e8d</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Customer Registration v2">00e657140f76ea006c3005cce1050e4b</workflow_version>
        <x>168</x>
        <y>11</y>
    </wf_activity>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>10e697140f76ea006c3005cce1050e8d</document_key>
        <order>100</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>90e697140f76ea006c3005cce1050e8d</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <value>8a7f13ee0f4c0200f7cee388b1050e29</value>
        <variable display_value="">c35daa890a0a0ba96248a709c32994d6</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>10e697140f76ea006c3005cce1050e8d</document_key>
        <order>150</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>50e697140f76ea006c3005cce1050e8e</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <value/>
        <variable display_value="">ae2121c70a0a0b3459708c9a60cd7312</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>10e697140f76ea006c3005cce1050e8d</document_key>
        <order>200</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>d8e697140f76ea006c3005cce1050e8d</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <value>API Key Registration Started</value>
        <variable display_value="">c35db2180a0a0ba96248a709d1b6df20</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>10e697140f76ea006c3005cce1050e8d</document_key>
        <order>300</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>9ce697140f76ea006c3005cce1050e8d</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <value>An API Key Registration was started for:&#13;
Company: ${u_company}&#13;
First Name: ${first_name}&#13;
Last Name: ${last_name}&#13;
Business Email: ${email}</value>
        <variable display_value="">c35db5a50a0a0ba96248a70938ae8de6</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>10e697140f76ea006c3005cce1050e8d</document_key>
        <order>400</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>54e697140f76ea006c3005cce1050e8d</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <value>0</value>
        <variable display_value="">6d6816cd0a6a803f0853a8df38007572</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>10e697140f76ea006c3005cce1050e8d</document_key>
        <order>500</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>18e697140f76ea006c3005cce1050e8d</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <value>// Set the variable 'answer' to a comma-separated list of user or group sys_ids that you want the email sent to.&#13;
</value>
        <variable display_value="">c35dae3d0a0a0ba96248a7098ed9b4aa</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="API Key Registration Started">10e697140f76ea006c3005cce1050e8d</activity>
        <condition>true</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Always</name>
        <order>0</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>14e697140f76ea006c3005cce1050e8e</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Begin">c7a5e32c0a0a0b3a002377c24ed8ea76</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>1</databus_lookup_id>
        <height/>
        <input/>
        <is_parent>false</is_parent>
        <name>Begin</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>5ce657140f76ea006c3005cce1050e53</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width>80</width>
        <workflow_version display_value="Customer Registration v2">00e657140f76ea006c3005cce1050e4b</workflow_version>
        <x>20</x>
        <y>0</y>
    </wf_activity>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Begin">5ce657140f76ea006c3005cce1050e53</activity>
        <condition>true</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Always</name>
        <order>0</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>dce657140f76ea006c3005cce1050e53</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="If">98f621ca0a0a0b5900f7c291f5e45a0e</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>11</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Company Already Exists (External)</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>5ce657140f76ea006c3005cce1050e52</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Customer Registration v2">00e657140f76ea006c3005cce1050e4b</workflow_version>
        <x>423</x>
        <y>517</y>
    </wf_activity>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>5ce657140f76ea006c3005cce1050e52</document_key>
        <order>100</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>dce657140f76ea006c3005cce1050e52</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <value/>
        <variable display_value="">493cba6a0a6a803f07df24b118473551</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>5ce657140f76ea006c3005cce1050e52</document_key>
        <order>200</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>90e657140f76ea006c3005cce1050e53</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <value>1</value>
        <variable display_value="">493d2c1d0a6a803f3217a75738ea3289</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>5ce657140f76ea006c3005cce1050e52</document_key>
        <order>300</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>54e657140f76ea006c3005cce1050e53</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <value>var custFound = 'N';&#13;
&#13;
//Check to see if the company already exists&#13;
var custAccount = new GlideRecord('core_company');&#13;
custAccount.addQuery('name', current.u_company);&#13;
custAccount.query();&#13;
while (custAccount.next()) {&#13;
	workflow.scratchpad.customerSysId = custAccount.sys_id;&#13;
	//Customer was found so the code can stop here&#13;
	custFound = 'Y';&#13;
	break;&#13;
}&#13;
&#13;
answer = ifScript();&#13;
function ifScript() {&#13;
	&#13;
	if (custFound == 'Y'){&#13;
		return 'yes';&#13;
	}&#13;
	else if (custFound == 'N'){&#13;
		return 'no';&#13;
	}&#13;
}&#13;
</value>
        <variable display_value="">c35e50810a0a0ba96248a709b450fc32</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Company Already Exists (External)">5ce657140f76ea006c3005cce1050e52</activity>
        <condition>activity.result == 'no'</condition>
        <condition_default display_value="No">c1eff6430a0a0b59000f955abe842c94</condition_default>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>No</name>
        <order>200</order>
        <short_description/>
        <skip_during_generate>true</skip_during_generate>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>98e657140f76ea006c3005cce1050e53</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
    </wf_condition>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Company Already Exists (External)">5ce657140f76ea006c3005cce1050e52</activity>
        <condition>activity.result == 'yes'</condition>
        <condition_default display_value="Yes">c1ef63200a0a0b59005ef89bae78feb7</condition_default>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Yes</name>
        <order>100</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>18e657140f76ea006c3005cce1050e53</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Run Script">db8c65aec0a8016501d00259bc7203a4</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>12</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Create Account (Customer Account Table - External)</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>08e657140f76ea006c3005cce1050e4f</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Customer Registration v2">00e657140f76ea006c3005cce1050e4b</workflow_version>
        <x>424</x>
        <y>626</y>
    </wf_activity>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>08e657140f76ea006c3005cce1050e4f</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>88e657140f76ea006c3005cce1050e4f</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <value>try&#13;
{&#13;
	//Create the account in Solara to be able to add the Solara account ID to SN&#13;
	var solaraRestCustomerRequest = new sn_ws.RESTMessageV2('Solara v2 - Accounts', 'post');&#13;
	solaraRestRequest.setRequestBody('{"name": "' +  current.u_company + '"}');&#13;
	var solaraRestCustomerResponse = solaraRestCustomerRequest.execute();&#13;
	if (solaraRestCustomerResponse.haveError()) {&#13;
		throw("Error creating solara account: " + current.u_company + " Solara customer 'POST' response: " + solaraRestCustomerResponse.getBody());&#13;
	}&#13;
	&#13;
	var custAccountId = JSON.parse(solaraRestCustomerResponse.getBody());&#13;
	solCustId = custAccountId.id;&#13;
	&#13;
	//Create the account in SN&#13;
	var grCustAcct = new GlideRecord('customer_account');&#13;
	grCustAcct.initialize();&#13;
	grCustAcct.name = current.u_company;&#13;
	grCustAcct.customer = true;&#13;
	grCustAcct.active = true;&#13;
	grCustAcct.u_business_unit = 'Weather API';&#13;
	grCustAcct.u_data_source = 'Solara';&#13;
	grCustAcct.u_solara_client_id = solCustId;&#13;
	&#13;
	var sys_id_cust = grCustAcct.insert();&#13;
	if (!gs.nil(sys_id_cust)) {&#13;
		workflow.scratchpad.customerSysId = sys_id_cust;&#13;
		//Customer was created&#13;
	} else {&#13;
		//Customer was not created&#13;
		throw("Customer account: " + current.u_company + " was not created");&#13;
		&#13;
	}&#13;
}&#13;
catch(err)&#13;
{&#13;
	activity.state = 'faulted';&#13;
	activity.output = err;&#13;
	workflow.scratchpad.error = activity.output;&#13;
	workflow.scratchpad.step = activity.name;&#13;
	gs.error("Customer Account creation error: " + err);&#13;
	gs.info("There was an issue creating your user ID, please contact apisupport@weather.com");&#13;
}</value>
        <variable display_value="">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Create Account (Customer Account Table - External)">08e657140f76ea006c3005cce1050e4f</activity>
        <condition>true &amp;&amp; activity.state != 'faulted'</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Always</name>
        <order>0</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>4ce657140f76ea006c3005cce1050e4f</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
    </wf_condition>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Create Account (Customer Account Table - External)">08e657140f76ea006c3005cce1050e4f</activity>
        <condition>activity.state == 'faulted'</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>true</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>Error</name>
        <order>1</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>cce657140f76ea006c3005cce1050e4f</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Run Script">db8c65aec0a8016501d00259bc7203a4</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>13</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Create Entitlement Account (External)</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>0ce657140f76ea006c3005cce1050e50</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Customer Registration v2">00e657140f76ea006c3005cce1050e4b</workflow_version>
        <x>606</x>
        <y>738</y>
    </wf_activity>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>0ce657140f76ea006c3005cce1050e50</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>8ce657140f76ea006c3005cce1050e50</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <value>try&#13;
{&#13;
	//Set the start data and end date for the entitlement&#13;
	var startDate =  new Date().toJSON().slice(0, 10);&#13;
	var endDate = new GlideDateTime();&#13;
	endDate.addDaysLocalTime(60);&#13;
	&#13;
	//Get the Solara account ID from the customer_account table&#13;
	var solCustId = '';&#13;
	var packageId = '';&#13;
	var realm = gs.getProperty('twc.solara_admin.realm');&#13;
	var selectedValues = '';&#13;
	&#13;
	var custId = new GlideRecord('customer_account');&#13;
	custId.addQuery('sys_id', workflow.scratchpad.customerSysId);&#13;
	custId.query();&#13;
	if (custId.next()){&#13;
		if (!custId.u_solara_client_id){&#13;
			//If the custId.u_solara_client_id is blank check Solara for account name&#13;
			var solaraRestCustomerRequest = new sn_ws.RESTMessageV2('Solara v2 - Accounts', 'post');&#13;
			solaraRestRequest.setRequestBody('{"name": "' +  custId.name + '"}');&#13;
			var solaraRestCustomerResponse = solaraRestCustomerRequest.execute();&#13;
			if (solaraRestCustomerResponse.haveError()) {&#13;
				throw("Error creating solara account: " + custId.name + " Solara customer 'POST' response: " + solaraRestCustomerResponse.getBody());&#13;
			}&#13;
			&#13;
			var custAccountId = JSON.parse(solaraRestCustomerResponse.getBody());&#13;
			solCustId = custAccountId.id;&#13;
			&#13;
			//Uddate the custId.u_solara_client_id with the new Solara customer ID value&#13;
			custId.u_solara_client_id = solCustId;&#13;
			custId.update();&#13;
		} else {&#13;
			solCustId = custId.u_solara_client_id;&#13;
		}&#13;
		//gs.addInfoMessage('solCustId: ' + solCustId);&#13;
	}&#13;
	&#13;
	//Get the package to be used for the account type to create the API key&#13;
	var devPkg = new GlideRecord('x_wec_solara_admin_developer_packages');&#13;
	devPkg.addQuery('u_account_type', current.u_account_type);&#13;
	devPkg.query();&#13;
	if (devPkg.next()) {&#13;
		var apiSysId  = devPkg.u_solara_package_id;&#13;
		&#13;
		//Check the the Solara package exists on the software product model table&#13;
		var solaraConfigRecord = new GlideRecord('cmdb_software_product_model');&#13;
		solaraConfigRecord.addQuery('sys_id', apiSysId);&#13;
		solaraConfigRecord.query();&#13;
		if (solaraConfigRecord.next()) {&#13;
			 packageId = solaraConfigRecord.u_solara_package_id2;&#13;
			&#13;
			//Get the plan information to be used to create the API key&#13;
			var planTbl = new GlideRecord('x_wec_solara_admin_plan');&#13;
			planTbl.addQuery('sys_id', solaraConfigRecord.u_solara_plan_id);&#13;
			planTbl.query();&#13;
			while (planTbl.next()){&#13;
				var planId = planTbl.u_solara_plan_id;&#13;
				var solaraPlanMax = planTbl.u_tpd;&#13;
			}&#13;
			&#13;
			var configSysId = solaraConfigRecord.sys_id;&#13;
		} else {&#13;
			throw("Error finding plan ID: " + planId);&#13;
		}&#13;
	} else {&#13;
		throw("no package for account type: " + current.u_account_type);&#13;
	}&#13;
	//gs.addInfoMessage('packageId: ' + packageId);&#13;
	selectedValues = 'workflow.scratchpad.customerSysId: ' + workflow.scratchpad.customerSysId + '/ solCustId: ' + solCustId + '/ packageId: ' + packageId;&#13;
	&#13;
	// =========================================================================================================&#13;
	// Step: Fetch entitlement limit&#13;
	/*var solaraRestPlanRequest = new sn_ws.RESTMessageV2('Solara Plan API', 'get');&#13;
	solaraRestPlanRequest.setStringParameter("planId", planId);&#13;
	var solaraRestPlanResponse = solaraRestPlanRequest.execute();&#13;
	if (solaraRestPlanResponse.haveError()) {&#13;
		throw("Error calling solara API to get plan ID: " + planId + " Solara plan response: " + solaraRestPlanResponse.getBody());&#13;
	}&#13;
	&#13;
	var solaraPlan = JSON.parse(solaraRestPlanResponse.getBody());&#13;
	// for some reason planData is store as another JSON string JSON, therefor parse once again...&#13;
	var solaraPlanData = JSON.parse(solaraPlan.planData);&#13;
	var solaraPlanMaxTPM = solaraPlanData.maxTPM;&#13;
	var solaraPlanMaxTPD = solaraPlanData.maxTPD;&#13;
	var solaraPlanMax = solaraPlanMaxTPM + ' calls per minute or ' + solaraPlanMaxTPD + ' calls per day';&#13;
 	*/&#13;
	&#13;
	//	=========================================================================================================&#13;
	// Step: Create API key in Solara via API call&#13;
	var solaraRestApiRequest = new sn_ws.RESTMessageV2('Solara v2 - API Keys', 'post');&#13;
	solaraRestApiRequest.setRequestBody('{"accountId": "' + solCustId + '", "realm": "' + realm + '"}');&#13;
	var solaraApiResponse = solaraRestApiRequest.execute();&#13;
	if (solaraApiResponse.haveError()) {&#13;
		throw("Error found: " + solaraApiResponse.getErrorMessage() + " calling solara API to create API key: " + solCustId + "/" + realm + "/" + selectedValues);&#13;
	}&#13;
	&#13;
	var solaraApiKey = JSON.parse(solaraApiResponse.getBody());&#13;
	//gs.addInfoMessage('Solara API Key: ' + solaraApiKey);&#13;
	&#13;
	// =========================================================================================================&#13;
	// Step: Create the service_entitlement record with API credentials information&#13;
	var grAddEntitlement = new GlideRecord('service_entitlement');&#13;
	grAddEntitlement.initialize();&#13;
	grAddEntitlement.u_entitled_user = workflow.scratchpad.contactSysId;&#13;
	grAddEntitlement.account = workflow.scratchpad.customerSysId;&#13;
	grAddEntitlement.u_solara_contact_ref = current.u_solara_contact_ref;&#13;
	grAddEntitlement.user_name = current.email;&#13;
	grAddEntitlement.u_product_name = current.u_account_name;&#13;
	grAddEntitlement.start_date = startDate;&#13;
	grAddEntitlement.end_date = endDate;&#13;
	grAddEntitlement.product = configSysId;&#13;
	grAddEntitlement.u_business_unit = 'Weather API';&#13;
	grAddEntitlement.u_data_source = 'Solara';&#13;
	grAddEntitlement.u_entitled_limit = solaraPlanMax;&#13;
	grAddEntitlement.u_solara_api_key = solaraApiKey.id;&#13;
	grAddEntitlement.u_solara_client_id = solCustId;&#13;
	&#13;
	var sys_id_entitlement = grAddEntitlement.insert();&#13;
	if (!gs.nil(sys_id_entitlement)) {&#13;
		workflow.scratchpad.entitlementSysId = sys_id_entitlement;&#13;
		//Entitlement was created&#13;
		&#13;
		//Update the sn_customerservice_registration with the API information;&#13;
		current.setValue('u_solara_api_key', solaraApiKey.id);&#13;
		current.setValue('u_solara_client_id', solCustId);		&#13;
	} else {&#13;
		//Entitlement was not created&#13;
		throw("Entitlement was not created for: '" + current.u_account_name + '/' + current.email);&#13;
	}&#13;
	&#13;
	// =========================================================================================================&#13;
	// Step: Add package to the API created if a package is assigned&#13;
	var solaraRestApiPkgRequest = new sn_ws.RESTMessageV2('Solara v2 - API Key Packages', 'put');&#13;
	solaraRestApiPkgRequest.setStringParameter("apiKeyId", solaraApiKey.id);&#13;
	solaraRestApiPkgRequest.setRequestBody('["' + packageId + '"]');&#13;
	var solaraApiPkgResponse = solaraRestApiPkgRequest.execute();&#13;
	if (solaraApiPkgResponse.haveError()) {&#13;
		throw("Error found: " + solaraApiPkgResponse.getErrorMessage() + " calling solara API PUT for API key: " + solaraApiKey.id + " to add package: " + packageId);&#13;
	}&#13;
	&#13;
	var solaraApiKeyPkg = JSON.parse(solaraApiPkgResponse.getBody());&#13;
	//gs.addInfoMessage('Solara API Key Pkg: ' + solaraApiKeyPkg);&#13;
	&#13;
	// =========================================================================================================&#13;
	// Step: Add package items (API endpoints) to the entitlement created&#13;
	&#13;
}&#13;
&#13;
catch(err)&#13;
{&#13;
	activity.state = 'faulted';&#13;
	activity.output = err;&#13;
	workflow.scratchpad.error = activity.output;&#13;
	workflow.scratchpad.step = activity.name;&#13;
	gs.error("Okta API user creation error: " + err);&#13;
	gs.info("There was an issue creating your user ID, please contact apisupport@weather.com");&#13;
}&#13;
</value>
        <variable display_value="">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Create Entitlement Account (External)">0ce657140f76ea006c3005cce1050e50</activity>
        <condition>true &amp;&amp; activity.state != 'faulted'</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Always</name>
        <order>0</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>40e657140f76ea006c3005cce1050e51</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
    </wf_condition>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Create Entitlement Account (External)">0ce657140f76ea006c3005cce1050e50</activity>
        <condition>activity.state == 'faulted'</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>true</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>Error</name>
        <order>1</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>c0e657140f76ea006c3005cce1050e51</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Run Script">db8c65aec0a8016501d00259bc7203a4</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>5</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Create Entitlement Account (Internal)</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>80e657140f76ea006c3005cce1050e50</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Customer Registration v2">00e657140f76ea006c3005cce1050e4b</workflow_version>
        <x>684</x>
        <y>88</y>
    </wf_activity>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>80e657140f76ea006c3005cce1050e50</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>04e657140f76ea006c3005cce1050e50</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <value>try&#13;
{&#13;
	//Set the start data and end date for the entitlement&#13;
	var startDate =  new Date().toJSON().slice(0, 10);&#13;
	var endDate = new GlideDateTime();&#13;
	endDate.addDaysLocalTime(60);&#13;
	&#13;
	//Get the Solara account ID from the customer_account table&#13;
	var solCustId = '';&#13;
	var packageId = '';&#13;
	var realm = gs.getProperty('twc.solara_admin.realm');&#13;
	var selectedValues = '';&#13;
	&#13;
	var custId = new GlideRecord('customer_account');&#13;
	custId.addQuery('sys_id', workflow.scratchpad.customerSysId);&#13;
	custId.query();&#13;
	if (custId.next()){&#13;
		if (!custId.u_solara_client_id){&#13;
			//If the custId.u_solara_client_id is blank check Solara for account name&#13;
			var solaraRestCustomerRequest = new sn_ws.RESTMessageV2('Solara v2 - Accounts', 'post');&#13;
			solaraRestRequest.setRequestBody('{"name": "' +  custId.name + '"}');&#13;
			var solaraRestCustomerResponse = solaraRestCustomerRequest.execute();&#13;
			if (solaraRestCustomerResponse.haveError()) {&#13;
				throw("Error creating solara account: " + custId.name + " Solara customer 'POST' response: " + solaraRestCustomerResponse.getBody());&#13;
			}&#13;
			&#13;
			var custAccountId = JSON.parse(solaraRestCustomerResponse.getBody());&#13;
			solCustId = custAccountId.id;&#13;
			&#13;
			//Uddate the custId.u_solara_client_id with the new Solara customer ID value&#13;
			custId.u_solara_client_id = solCustId;&#13;
			custId.update();&#13;
		} else {&#13;
			solCustId = custId.u_solara_client_id;&#13;
		}&#13;
		//gs.addInfoMessage('solCustId: ' + solCustId);&#13;
	}&#13;
	&#13;
	//Get the package to be used for the account type to create the API key&#13;
	var devPkg = new GlideRecord('x_wec_solara_admin_developer_packages');&#13;
	devPkg.addQuery('u_account_type', current.u_account_type);&#13;
	devPkg.query();&#13;
	if (devPkg.next()) {&#13;
		var apiSysId  = devPkg.u_solara_package_id;&#13;
		&#13;
		//Check the the Solara package exists on the software product model table&#13;
		var solaraConfigRecord = new GlideRecord('cmdb_software_product_model');&#13;
		solaraConfigRecord.addQuery('sys_id', apiSysId);&#13;
		solaraConfigRecord.query();&#13;
		if (solaraConfigRecord.next()) {&#13;
			packageId = solaraConfigRecord.u_solara_package_id2;&#13;
			&#13;
			//Get the plan information to be used to create the API key&#13;
			var planTbl = new GlideRecord('x_wec_solara_admin_plan');&#13;
			planTbl.addQuery('sys_id', solaraConfigRecord.u_solara_plan_id);&#13;
			planTbl.query();&#13;
			while (planTbl.next()){&#13;
				var planId = planTbl.u_solara_plan_id;&#13;
				var solaraPlanMax = planTbl.u_tpd;&#13;
			}&#13;
			&#13;
			var configSysId = solaraConfigRecord.sys_id;&#13;
		} else {&#13;
			throw("Error finding plan ID: " + planId);&#13;
		}&#13;
	} else {&#13;
		throw("no package for account type: " + current.u_account_type);&#13;
	}&#13;
	//gs.addInfoMessage('packageId: ' + packageId);&#13;
	selectedValues = 'workflow.scratchpad.customerSysId: ' + workflow.scratchpad.customerSysId + '/ solCustId: ' + solCustId + '/ packageId: ' + packageId;&#13;
	&#13;
	// =========================================================================================================&#13;
	// Step: Fetch entitlement limit&#13;
	/*var solaraRestPlanRequest = new sn_ws.RESTMessageV2('Solara Plan API', 'get');&#13;
	solaraRestPlanRequest.setStringParameter("planId", planId);&#13;
	var solaraRestPlanResponse = solaraRestPlanRequest.execute();&#13;
	if (solaraRestPlanResponse.haveError()) {&#13;
		throw("Error calling solara API to get plan ID: " + planId + " Solara plan response: " + solaraRestPlanResponse.getBody());&#13;
	}&#13;
	&#13;
	var solaraPlan = JSON.parse(solaraRestPlanResponse.getBody());&#13;
	// for some reason planData is store as another JSON string JSON, therefor parse once again...&#13;
	var solaraPlanData = JSON.parse(solaraPlan.planData);&#13;
	var solaraPlanMaxTPM = solaraPlanData.maxTPM;&#13;
	var solaraPlanMaxTPD = solaraPlanData.maxTPD;&#13;
	var solaraPlanMax = solaraPlanMaxTPM + ' calls per minute or ' + solaraPlanMaxTPD + ' calls per day';&#13;
 	*/&#13;
	&#13;
	//	=========================================================================================================&#13;
	// Step: Create API key in Solara via API call&#13;
	var solaraRestApiRequest = new sn_ws.RESTMessageV2('Solara v2 - API Keys', 'post');&#13;
	solaraRestApiRequest.setRequestBody('{"accountId": "' + solCustId + '", "realm": "' + realm + '"}');&#13;
	//{"accountId": "74b60108-f16d-43b4-b601-08f16dc3b41d","realm": "qaservicenow-gateway.weather.com"}&#13;
	var solaraApiResponse = solaraRestApiRequest.execute();&#13;
	if (solaraApiResponse.haveError()) {&#13;
		throw("Error found: " + solaraApiResponse.getErrorMessage() + " calling solara API to create API key: " + solCustId + "/" + realm + "/" + selectedValues);&#13;
	}&#13;
	&#13;
	var solaraApiKey = JSON.parse(solaraApiResponse.getBody());&#13;
	//gs.addInfoMessage('Solara API Key: ' + solaraApiKey);&#13;
	&#13;
	// =========================================================================================================&#13;
	// Step: Create the service_entitlement record with API credentials information&#13;
	var grAddEntitlement = new GlideRecord('service_entitlement');&#13;
	grAddEntitlement.initialize();&#13;
	grAddEntitlement.u_entitled_user = workflow.scratchpad.contactSysId;&#13;
	grAddEntitlement.account = workflow.scratchpad.customerSysId;&#13;
	grAddEntitlement.u_solara_contact_ref = current.u_solara_contact_ref;&#13;
	grAddEntitlement.user_name = current.email;&#13;
	grAddEntitlement.u_product_name = current.u_account_name;&#13;
	grAddEntitlement.start_date = startDate;&#13;
	grAddEntitlement.end_date = endDate;&#13;
	grAddEntitlement.product = configSysId;&#13;
	grAddEntitlement.u_business_unit = 'Weather API';&#13;
	grAddEntitlement.u_data_source = 'Solara';&#13;
	grAddEntitlement.u_entitled_limit = solaraPlanMax;&#13;
	grAddEntitlement.u_solara_api_key = solaraApiKey.id;&#13;
	grAddEntitlement.u_solara_client_id = solCustId;&#13;
	&#13;
	var sys_id_entitlement = grAddEntitlement.insert();&#13;
	if (!gs.nil(sys_id_entitlement)) {&#13;
		workflow.scratchpad.entitlementSysId = sys_id_entitlement;&#13;
		//Entitlement was created&#13;
		&#13;
		//Update the sn_customerservice_registration with the API information;&#13;
		current.setValue('u_solara_api_key', solaraApiKey.id);&#13;
		current.setValue('u_solara_client_id', solCustId);&#13;
	} else {&#13;
		//Entitlement was not created&#13;
		throw("Entitlement was not created for: '" + current.u_account_name + '/' + current.email);&#13;
	}&#13;
	&#13;
	// =========================================================================================================&#13;
	// Step: Add package to the API created if a package is assigned&#13;
	var solaraRestApiPkgRequest = new sn_ws.RESTMessageV2('Solara v2 - API Key Packages', 'put');&#13;
	solaraRestApiPkgRequest.setStringParameter("apiKeyId", solaraApiKey.id);&#13;
	solaraRestApiPkgRequest.setRequestBody('["' + packageId + '"]');&#13;
	var solaraApiPkgResponse = solaraRestApiPkgRequest.execute();&#13;
	if (solaraApiPkgResponse.haveError()) {&#13;
		throw("Error found: " + solaraApiPkgResponse.getErrorMessage() + " calling solara API PUT for API key: " + solaraApiKey.id + " to add package: " + packageId);&#13;
	}&#13;
	&#13;
	var solaraApiKeyPkg = JSON.parse(solaraApiPkgResponse.getBody());&#13;
	//gs.addInfoMessage('Solara API Key Pkg: ' + solaraApiKeyPkg);&#13;
	&#13;
	// =========================================================================================================&#13;
	// Step: Add package items (API endpoints) to the entitlement created&#13;
	&#13;
}&#13;
&#13;
catch(err)&#13;
{&#13;
	activity.state = 'faulted';&#13;
	activity.output = err;&#13;
	workflow.scratchpad.error = activity.output;&#13;
	workflow.scratchpad.step = activity.name;&#13;
	gs.error("Okta API user creation error: " + err);&#13;
	gs.info("There was an issue creating your user ID, please contact apisupport@weather.com");&#13;
}&#13;
</value>
        <variable display_value="">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Create Entitlement Account (Internal)">80e657140f76ea006c3005cce1050e50</activity>
        <condition>true &amp;&amp; activity.state != 'faulted'</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Always</name>
        <order>0</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>c4e657140f76ea006c3005cce1050e50</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
    </wf_condition>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Create Entitlement Account (Internal)">80e657140f76ea006c3005cce1050e50</activity>
        <condition>activity.state == 'faulted'</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>true</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>Error</name>
        <order>1</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>48e657140f76ea006c3005cce1050e50</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Run Script">db8c65aec0a8016501d00259bc7203a4</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>8</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Create OKTA Account (External)</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>18e697140f76ea006c3005cce1050e8c</sys_id>
        <sys_mod_count>1</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 14:02:08</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Customer Registration v2">00e657140f76ea006c3005cce1050e4b</workflow_version>
        <x>166</x>
        <y>218</y>
    </wf_activity>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>18e697140f76ea006c3005cce1050e8c</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>98e697140f76ea006c3005cce1050e8c</sys_id>
        <sys_mod_count>1</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 14:02:08</sys_updated_on>
        <value>//create user in OKTA via the OKTA API Call&#13;
//instantiate a okta api agent&#13;
//call create&#13;
try&#13;
{&#13;
	var restMessage = new sn_ws.RESTMessageV2('OKTA Create User - v2', 'post');&#13;
	restMessage.setRequestBody('{"profile": {"firstName": "' + current.first_name + '", "lastName": "' + current.last_name + '","email": "' + current.email + '","login": "' + current.email + '", "mobilePhone": "' + current.u_mobile_phone + '"},"credentials": {"password": {"value": "Password1111!@#"},"recovery_question": {"question": "' + current.u_recovery_question + '","answer": "' + current.u_recovery_answer + '"}}}');&#13;
	&#13;
	var response = restMessage.execute();&#13;
	&#13;
	if (response.haveError()) {&#13;
		throw("Okta error create user: '" + response.getErrorMessage());&#13;
	}&#13;
	&#13;
	var user = JSON.parse(response.getBody());&#13;
	&#13;
	// Fail in case user ID is missing&#13;
	if (!user.id) {&#13;
		throw("No OKTA user ID");&#13;
	}&#13;
	&#13;
	// Expire password for the user via REST call&#13;
	var expireRestMessage = new sn_ws.RESTMessageV2('OKTA Expire password - v2', 'post');&#13;
	expireRestMessage.setStringParameter("id", user.id);&#13;
	var expireResponse = expireRestMessage.execute();&#13;
	&#13;
	if (expireResponse.haveError()) {&#13;
		throw("Okta error password expire: '" + response.getErrorMessage());&#13;
	}&#13;
	&#13;
	var expireResponseBody = expireResponse.getBody();&#13;
	var tempPassword = JSON.parse(expireResponseBody);&#13;
	workflow.scratchpad.tempPassword = tempPassword.tempPassword;&#13;
	current.setValue('u_temp_password', tempPassword.tempPassword);&#13;
	&#13;
	sendEmailNotification(String(current.email), String(current.first_name), String(current.last_name), tempPassword.tempPassword);&#13;
}&#13;
catch(err)&#13;
{&#13;
	activity.state = 'faulted';&#13;
	activity.output = err;&#13;
	workflow.scratchpad.error = activity.output;&#13;
	workflow.scratchpad.step = activity.name;&#13;
	gs.error("Okta API user creation error: " + err);&#13;
	gs.info("There was an issue creating your user ID, please contact apisupport@weather.com");&#13;
}&#13;
&#13;
function sendEmailNotification(email, firstName, lastName, tempPassword) {&#13;
	var encodedData = new global.JSON().encode({&#13;
		email: email,&#13;
		firstName: firstName,&#13;
		lastName: lastName,&#13;
		tempPassword: tempPassword&#13;
	});&#13;
	&#13;
	activity.output = 'JSON array: ' + encodedData;&#13;
	gs.eventQueue('apiregistration.okta.temppassword', current, [email], encodedData);&#13;
}&#13;
</value>
        <variable display_value="">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Create OKTA Account (External)">18e697140f76ea006c3005cce1050e8c</activity>
        <condition>true</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Always</name>
        <order>0</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>5ce697140f76ea006c3005cce1050e8c</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="End">c7a66f7d0a0a0b3a004544a6d2f14076</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>2</databus_lookup_id>
        <height/>
        <input/>
        <is_parent>false</is_parent>
        <name>End</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>8ce657140f76ea006c3005cce1050e4d</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width>80</width>
        <workflow_version display_value="Customer Registration v2">00e657140f76ea006c3005cce1050e4b</workflow_version>
        <x>1117</x>
        <y>974</y>
    </wf_activity>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Notification">0a6c97790a0a0b2756919eb960284334</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>7</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Error in Run Script</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>84e657140f76ea006c3005cce1050e51</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Customer Registration v2">00e657140f76ea006c3005cce1050e4b</workflow_version>
        <x>910</x>
        <y>942</y>
    </wf_activity>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>84e657140f76ea006c3005cce1050e51</document_key>
        <order>100</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>08e657140f76ea006c3005cce1050e51</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <value>8a7f13ee0f4c0200f7cee388b1050e29</value>
        <variable display_value="">c35daa890a0a0ba96248a709c32994d6</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>84e657140f76ea006c3005cce1050e51</document_key>
        <order>150</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>d4e657140f76ea006c3005cce1050e52</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <value/>
        <variable display_value="">ae2121c70a0a0b3459708c9a60cd7312</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>84e657140f76ea006c3005cce1050e51</document_key>
        <order>200</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>40e657140f76ea006c3005cce1050e52</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <value>Errorn in Run Script</value>
        <variable display_value="">c35db2180a0a0ba96248a709d1b6df20</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>84e657140f76ea006c3005cce1050e51</document_key>
        <order>300</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>14e657140f76ea006c3005cce1050e52</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <value>Error found in workflow step: &lt;mail_script&gt; template.print(workflow.scratchpad.step)&lt;/mail_script&gt;.&#13;
&#13;
The error found is: &lt;mail_script&gt; template.print(workflow.scratchpad.error)&lt;/mail_script&gt;.</value>
        <variable display_value="">c35db5a50a0a0ba96248a70938ae8de6</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>84e657140f76ea006c3005cce1050e51</document_key>
        <order>400</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>c8e657140f76ea006c3005cce1050e51</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <value>0</value>
        <variable display_value="">6d6816cd0a6a803f0853a8df38007572</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>84e657140f76ea006c3005cce1050e51</document_key>
        <order>500</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>8ce657140f76ea006c3005cce1050e51</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <value>// Set the variable 'answer' to a comma-separated list of user or group sys_ids that you want the email sent to.&#13;
</value>
        <variable display_value="">c35dae3d0a0a0ba96248a7098ed9b4aa</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Error in Run Script">84e657140f76ea006c3005cce1050e51</activity>
        <condition>true</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Always</name>
        <order>0</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>98e657140f76ea006c3005cce1050e52</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Run Script">db8c65aec0a8016501d00259bc7203a4</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>10</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Get Values for Scratchpad (External)</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>48e657140f76ea006c3005cce1050e4b</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Customer Registration v2">00e657140f76ea006c3005cce1050e4b</workflow_version>
        <x>170</x>
        <y>422</y>
    </wf_activity>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>48e657140f76ea006c3005cce1050e4b</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>c8e657140f76ea006c3005cce1050e4b</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <value>workflow.scratchpad.first_name = current.first_name.toSting();&#13;
workflow.scratchpad.last_name = current.last_name.toString();&#13;
workflow.scratchpad.email = current.email.toString();&#13;
workflow.scratchpad.phone = current.u_business_phone.toString();&#13;
workflow.scratchpad.mobile = current.u_mobile_phone.toString();&#13;
workflow.scratchpad.classification = current.u_account_type.toString();&#13;
workflow.scratchpad.account = current.u_company.toString();&#13;
workflow.scratchpad.company = current.u_company.toString();&#13;
workflow.scratchpad.solara_company = current.u_solara_contact_ref.toString();&#13;
workflow.scratchpad.account_name = current.u_account_name.toString();</value>
        <variable display_value="">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Get Values for Scratchpad (External)">48e657140f76ea006c3005cce1050e4b</activity>
        <condition>true &amp;&amp; activity.state != 'faulted'</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Always</name>
        <order>0</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>00e657140f76ea006c3005cce1050e4c</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
    </wf_condition>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Get Values for Scratchpad (External)">48e657140f76ea006c3005cce1050e4b</activity>
        <condition>activity.state == 'faulted'</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>true</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>Error</name>
        <order>1</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>8ce657140f76ea006c3005cce1050e4b</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Notification">0a6c97790a0a0b2756919eb960284334</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>14</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Notify Customer w/Developer API Key (external)</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>40e657140f76ea006c3005cce1050e4e</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Customer Registration v2">00e657140f76ea006c3005cce1050e4b</workflow_version>
        <x>606</x>
        <y>848</y>
    </wf_activity>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>40e657140f76ea006c3005cce1050e4e</document_key>
        <order>100</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>c0e657140f76ea006c3005cce1050e4e</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <value/>
        <variable display_value="">c35daa890a0a0ba96248a709c32994d6</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>40e657140f76ea006c3005cce1050e4e</document_key>
        <order>150</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>80e657140f76ea006c3005cce1050e4f</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <value/>
        <variable display_value="">ae2121c70a0a0b3459708c9a60cd7312</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>40e657140f76ea006c3005cce1050e4e</document_key>
        <order>200</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>0ce657140f76ea006c3005cce1050e4e</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <value>Thank you for registering for a Developer API Key - API Key Provisioned</value>
        <variable display_value="">c35db2180a0a0ba96248a709d1b6df20</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>40e657140f76ea006c3005cce1050e4e</document_key>
        <order>300</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>cce657140f76ea006c3005cce1050e4e</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <value>Hi ${first_name} ${last_name},&#13;
&#13;
Thank you for activating your account!&#13;
Your Developer API key is now provisioned and ready to use for an evaluation period of 60 days.&#13;
&#13;
Your Account Name is:	&#13;
&lt;B&gt;${u_company}&lt;/B&gt;&#13;
Your User ID is:&#13;
&lt;B&gt;${email}&lt;/B&gt;&#13;
Your Developer API is:&#13;
&lt;B&gt;${u_solara_api_key}&lt;/B&gt;&#13;
&#13;
To get started with documentation, follow this &lt;mail_script&gt;  &#13;
template.print('&lt;a href="' + gs.getProperty("glide.servlet.uri") + "apicustomer" + '"&gt;LINK&lt;/a&gt;');  &#13;
&lt;/mail_script&gt;&#13;
&#13;
A few notes:&#13;
&#13;
Access to the APIs via the key comes with some terms and conditions.  Please click the  &lt;mail_script&gt;template.print('&lt;a href="https://weather.com/legal"&gt;LINK&lt;/a&gt;');  &#13;
&lt;/mail_script&gt; to review.  &#13;
You are limited to 5,000 calls per day on your developer key.&#13;
&#13;
If you have any questions, we're always available at  apisupport@weather.com.&#13;
&#13;
Regards,&#13;
&#13;
The Weather Company Support Team</value>
        <variable display_value="">c35db5a50a0a0ba96248a70938ae8de6</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>40e657140f76ea006c3005cce1050e4e</document_key>
        <order>400</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>84e657140f76ea006c3005cce1050e4e</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <value>1</value>
        <variable display_value="">6d6816cd0a6a803f0853a8df38007572</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>40e657140f76ea006c3005cce1050e4e</document_key>
        <order>500</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>48e657140f76ea006c3005cce1050e4e</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <value>// Set the variable 'answer' to a comma-separated list of user or group sys_ids that you want the email sent to.&#13;
var ip=current.email ;&#13;
answer = [ip];</value>
        <variable display_value="">c35dae3d0a0a0ba96248a7098ed9b4aa</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Notify Customer w/Developer API Key (external)">40e657140f76ea006c3005cce1050e4e</activity>
        <condition>true</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Always</name>
        <order>0</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>44e657140f76ea006c3005cce1050e4f</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Notification">0a6c97790a0a0b2756919eb960284334</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>6</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Notify Customer w/Developer API Key (Internal)</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>90e657140f76ea006c3005cce1050e54</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Customer Registration v2">00e657140f76ea006c3005cce1050e4b</workflow_version>
        <x>687</x>
        <y>199</y>
    </wf_activity>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>90e657140f76ea006c3005cce1050e54</document_key>
        <order>100</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>14e657140f76ea006c3005cce1050e54</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <value/>
        <variable display_value="">c35daa890a0a0ba96248a709c32994d6</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>90e657140f76ea006c3005cce1050e54</document_key>
        <order>150</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>90e697140f76ea006c3005cce1050e8c</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <value/>
        <variable display_value="">ae2121c70a0a0b3459708c9a60cd7312</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>90e657140f76ea006c3005cce1050e54</document_key>
        <order>200</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>5ce657140f76ea006c3005cce1050e54</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <value>Thank you for registering for a Developer API Key - API Key Provisioned</value>
        <variable display_value="">c35db2180a0a0ba96248a709d1b6df20</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>90e657140f76ea006c3005cce1050e54</document_key>
        <order>300</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>10e657140f76ea006c3005cce1050e55</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <value>Thanks, your account is now activated!&#13;
Your Developer API key is now provisioned and ready to use for an evaluation period of 60 days.&#13;
&#13;
&lt;B&gt;Your Account Name is:	${u_company}&lt;/B&gt;&#13;
&lt;B&gt;Your User ID is: ${email}&lt;/B&gt;&#13;
&lt;B&gt;Your Developer API is: ${u_solara_api_key}&lt;/B&gt;&#13;
&#13;
Since you are a weather.com employee you already have an Okta SSO account, to access the API Developer Customer Community for documentation and collaboration follow the steps below.&#13;
&#13;
Steps to Access "developer api portal" with @weather.com Credentials:&lt;ul&gt;&lt;li&gt;Navigate to services.weather.com and login using your Enterprise credentials&lt;/li&gt;&lt;li&gt;Open a new tab and navigate to "developer api portal" by &lt;mail_script&gt;template.print('&lt;a href="' + gs.getProperty("glide.servlet.uri") + "apicustomer" + '"&gt;clicking here&lt;/a&gt;'); &lt;/mail_script&gt;, the portal home page should render without need for authenticating. &lt;/li&gt;&lt;/ul&gt;&#13;
&#13;
Follow this &lt;mail_script&gt;template.print('&lt;a href="' + gs.getProperty("glide.servlet.uri") + "apicustomer" + '"&gt;link&lt;/a&gt;');  &#13;
&lt;/mail_script&gt; to head directly to the documentation page.&#13;
&#13;
A few notes:&lt;ul&gt;&lt;li&gt;Please click on &lt;mail_script&gt;  &#13;
template.print('&lt;a href="https://weather.com/legal"&gt;link&lt;/a&gt;');&lt;/mail_script&gt; to review terms and conditions of usage. &lt;/li&gt;&lt;li&gt;You are limited to 5,000 calls per day on your developer key.  &lt;/li&gt;&lt;/ul&gt;&#13;
&#13;
&#13;
Please do not reply to this email as the mailbox is not monitored.  If you have questions or concerns then please send an email to apisupport@weather.com&#13;
&#13;
Regards,&#13;
&#13;
The TWC API Team</value>
        <variable display_value="">c35db5a50a0a0ba96248a70938ae8de6</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>90e657140f76ea006c3005cce1050e54</document_key>
        <order>400</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>d4e657140f76ea006c3005cce1050e54</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <value>1</value>
        <variable display_value="">6d6816cd0a6a803f0853a8df38007572</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>90e657140f76ea006c3005cce1050e54</document_key>
        <order>500</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>98e657140f76ea006c3005cce1050e54</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <value>// Set the variable 'answer' to a comma-separated list of user or group sys_ids that you want the email sent to.&#13;
var ip=current.email ;&#13;
answer = [ip];</value>
        <variable display_value="">c35dae3d0a0a0ba96248a7098ed9b4aa</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Notify Customer w/Developer API Key (Internal)">90e657140f76ea006c3005cce1050e54</activity>
        <condition>true</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Always</name>
        <order>0</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>54e697140f76ea006c3005cce1050e8c</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="If">98f621ca0a0a0b5900f7c291f5e45a0e</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>4</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>User is Employee</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>8ce657140f76ea006c3005cce1050e4c</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Customer Registration v2">00e657140f76ea006c3005cce1050e4b</workflow_version>
        <x>409</x>
        <y>64</y>
    </wf_activity>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>8ce657140f76ea006c3005cce1050e4c</document_key>
        <order>100</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>00e657140f76ea006c3005cce1050e4d</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <value/>
        <variable display_value="">493cba6a0a6a803f07df24b118473551</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>8ce657140f76ea006c3005cce1050e4c</document_key>
        <order>200</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>c0e657140f76ea006c3005cce1050e4d</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <value>1</value>
        <variable display_value="">493d2c1d0a6a803f3217a75738ea3289</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>8ce657140f76ea006c3005cce1050e4c</document_key>
        <order>300</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>84e657140f76ea006c3005cce1050e4d</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <value>var employeeFound = 'N';&#13;
var custFound = 'N';&#13;
&#13;
//Check to see if the user already exists&#13;
var userData = new GlideRecord('sys_user');&#13;
userData.addQuery('email', current.email);&#13;
userData.addQuery('sys_class_name', 'sys_user');&#13;
userData.query();&#13;
while (userData.next()) {&#13;
	workflow.scratchpad.employeeSysId = userData.sys_id;&#13;
	workflow.scratchpad.contactSysId = userData.sys_id;&#13;
	//Employee was found so the code can stop here&#13;
	employeeFound = 'Y';&#13;
	&#13;
	if (!userData.company){&#13;
		//Check to see if the company already exists&#13;
		var custAccount = new GlideRecord('core_company');&#13;
		custAccount.addQuery('name', current.u_company);&#13;
		custAccount.query();&#13;
		if (custAccount.next()) {&#13;
			workflow.scratchpad.customerSysId = custAccount.sys_id;&#13;
			//Customer was found so the code can stop here&#13;
			custFound = 'Y';&#13;
			&#13;
			userData.company = custAccount.sys_id;&#13;
			userData.update();&#13;
			&#13;
			break;&#13;
		}&#13;
	} else {&#13;
		workflow.scratchpad.customerSysId = userData.company;&#13;
		custFound = 'Y';&#13;
		break;&#13;
	}&#13;
	break;&#13;
}&#13;
&#13;
if (custFound == 'N'){&#13;
	workflow.scratchpad.customerSysId = '0617b5d70f5526406c3005cce1050e26';&#13;
}&#13;
&#13;
answer = ifScript();&#13;
function ifScript() {&#13;
	&#13;
	if (employeeFound == 'Y'){&#13;
		return 'yes';&#13;
	}&#13;
	else if (employeeFound == 'N'){&#13;
		return 'no';&#13;
	}&#13;
}&#13;
</value>
        <variable display_value="">c35e50810a0a0ba96248a709b450fc32</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="User is Employee">8ce657140f76ea006c3005cce1050e4c</activity>
        <condition>activity.result == 'no'</condition>
        <condition_default display_value="No">c1eff6430a0a0b59000f955abe842c94</condition_default>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>No</name>
        <order>200</order>
        <short_description/>
        <skip_during_generate>true</skip_during_generate>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>c8e657140f76ea006c3005cce1050e4d</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
    </wf_condition>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="User is Employee">8ce657140f76ea006c3005cce1050e4c</activity>
        <condition>activity.result == 'yes'</condition>
        <condition_default display_value="Yes">c1ef63200a0a0b59005ef89bae78feb7</condition_default>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Yes</name>
        <order>100</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>48e657140f76ea006c3005cce1050e4d</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Wait for condition">d93a02ae0a0a0aa30077abad3fdac035</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>9</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Wait for Account Activation (External)</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>c0e657140f76ea006c3005cce1050e4c</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="Customer Registration v2">00e657140f76ea006c3005cce1050e4b</workflow_version>
        <x>169</x>
        <y>321</y>
    </wf_activity>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>c0e657140f76ea006c3005cce1050e4c</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>08e657140f76ea006c3005cce1050e4c</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <value/>
        <variable display_value="">c35dc4cd0a0a0ba96248a70990c1ac54</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>c0e657140f76ea006c3005cce1050e4c</document_key>
        <order>2</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>44e657140f76ea006c3005cce1050e4c</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <value>// Set the variable 'answer' to true or false to indicate if the condition has been met or not.&#13;
answer = true;&#13;
</value>
        <variable display_value="">c35debce0a0a0ba96248a709440cf31a</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Wait for Account Activation (External)">c0e657140f76ea006c3005cce1050e4c</activity>
        <condition>true</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Always</name>
        <order>0</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>c8e657140f76ea006c3005cce1050e4c</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
    </wf_condition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Error">cce657140f76ea006c3005cce1050e4f</condition>
        <from display_value="Create Account (Customer Account Table - External)">08e657140f76ea006c3005cce1050e4f</from>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>50e697140f76ea006c3005cce1050e8f</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <to display_value="End">8ce657140f76ea006c3005cce1050e4d</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Error">48e657140f76ea006c3005cce1050e50</condition>
        <from display_value="Create Entitlement Account (Internal)">80e657140f76ea006c3005cce1050e50</from>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>50e697140f76ea006c3005cce1050e90</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <to display_value="End">8ce657140f76ea006c3005cce1050e4d</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Always">c8e657140f76ea006c3005cce1050e4c</condition>
        <from display_value="Wait for Account Activation (External)">c0e657140f76ea006c3005cce1050e4c</from>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>54e697140f76ea006c3005cce1050e8f</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <to display_value="Get Values for Scratchpad (External)">48e657140f76ea006c3005cce1050e4b</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Always">54e697140f76ea006c3005cce1050e8c</condition>
        <from display_value="Notify Customer w/Developer API Key (Internal)">90e657140f76ea006c3005cce1050e54</from>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>54e697140f76ea006c3005cce1050e90</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <to display_value="End">8ce657140f76ea006c3005cce1050e4d</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="No">c8e657140f76ea006c3005cce1050e4d</condition>
        <from display_value="User is Employee">8ce657140f76ea006c3005cce1050e4c</from>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>58e697140f76ea006c3005cce1050e8f</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <to display_value="Create OKTA Account (External)">18e697140f76ea006c3005cce1050e8c</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Always">5ce697140f76ea006c3005cce1050e8c</condition>
        <from display_value="Create OKTA Account (External)">18e697140f76ea006c3005cce1050e8c</from>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>58e697140f76ea006c3005cce1050e90</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <to display_value="Wait for Account Activation (External)">c0e657140f76ea006c3005cce1050e4c</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Error">8ce657140f76ea006c3005cce1050e4b</condition>
        <from display_value="Get Values for Scratchpad (External)">48e657140f76ea006c3005cce1050e4b</from>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>5ce697140f76ea006c3005cce1050e8e</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <to display_value="End">8ce657140f76ea006c3005cce1050e4d</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Error">c0e657140f76ea006c3005cce1050e51</condition>
        <from display_value="Create Entitlement Account (External)">0ce657140f76ea006c3005cce1050e50</from>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>5ce697140f76ea006c3005cce1050e8f</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <to display_value="End">8ce657140f76ea006c3005cce1050e4d</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Yes">18e657140f76ea006c3005cce1050e53</condition>
        <from display_value="Company Already Exists (External)">5ce657140f76ea006c3005cce1050e52</from>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>5ce697140f76ea006c3005cce1050e90</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <to display_value="Create Account (Customer Account Table - External)">08e657140f76ea006c3005cce1050e4f</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Always">dce657140f76ea006c3005cce1050e53</condition>
        <from display_value="Begin">5ce657140f76ea006c3005cce1050e53</from>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>d0e697140f76ea006c3005cce1050e8f</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <to display_value="User is Employee">8ce657140f76ea006c3005cce1050e4c</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Always">c4e657140f76ea006c3005cce1050e50</condition>
        <from display_value="Create Entitlement Account (Internal)">80e657140f76ea006c3005cce1050e50</from>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>d0e697140f76ea006c3005cce1050e90</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <to display_value="Notify Customer w/Developer API Key (Internal)">90e657140f76ea006c3005cce1050e54</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Always">98e657140f76ea006c3005cce1050e52</condition>
        <from display_value="Error in Run Script">84e657140f76ea006c3005cce1050e51</from>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>d4e697140f76ea006c3005cce1050e8f</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <to display_value="End">8ce657140f76ea006c3005cce1050e4d</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Always">44e657140f76ea006c3005cce1050e4f</condition>
        <from display_value="Notify Customer w/Developer API Key (external)">40e657140f76ea006c3005cce1050e4e</from>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>d4e697140f76ea006c3005cce1050e90</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <to display_value="End">8ce657140f76ea006c3005cce1050e4d</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Always">00e657140f76ea006c3005cce1050e4c</condition>
        <from display_value="Get Values for Scratchpad (External)">48e657140f76ea006c3005cce1050e4b</from>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>d8e697140f76ea006c3005cce1050e8e</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <to display_value="Company Already Exists (External)">5ce657140f76ea006c3005cce1050e52</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Yes">48e657140f76ea006c3005cce1050e4d</condition>
        <from display_value="User is Employee">8ce657140f76ea006c3005cce1050e4c</from>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>d8e697140f76ea006c3005cce1050e8f</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <to display_value="Create Entitlement Account (Internal)">80e657140f76ea006c3005cce1050e50</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="No">98e657140f76ea006c3005cce1050e53</condition>
        <from display_value="Company Already Exists (External)">5ce657140f76ea006c3005cce1050e52</from>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>d8e697140f76ea006c3005cce1050e90</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <to display_value="End">8ce657140f76ea006c3005cce1050e4d</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Always">4ce657140f76ea006c3005cce1050e4f</condition>
        <from display_value="Create Account (Customer Account Table - External)">08e657140f76ea006c3005cce1050e4f</from>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>dce697140f76ea006c3005cce1050e8e</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <to display_value="Create Entitlement Account (External)">0ce657140f76ea006c3005cce1050e50</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Always">40e657140f76ea006c3005cce1050e51</condition>
        <from display_value="Create Entitlement Account (External)">0ce657140f76ea006c3005cce1050e50</from>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:31</sys_created_on>
        <sys_id>dce697140f76ea006c3005cce1050e8f</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:31</sys_updated_on>
        <to display_value="Notify Customer w/Developer API Key (external)">40e657140f76ea006c3005cce1050e4e</to>
    </wf_transition>
    <wf_estimated_runtime_config action="INSERT_OR_UPDATE">
        <estimated_run_time/>
        <no_of_data_points>1</no_of_data_points>
        <percentage_threshold_ert>20</percentage_threshold_ert>
        <sys_created_by>peter.crivello@weather.com</sys_created_by>
        <sys_created_on>2016-10-27 13:01:30</sys_created_on>
        <sys_id>40e657140f76ea006c3005cce1050e4b</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>peter.crivello@weather.com</sys_updated_by>
        <sys_updated_on>2016-10-27 13:01:30</sys_updated_on>
        <workflow_version display_value="Customer Registration v2">00e657140f76ea006c3005cce1050e4b</workflow_version>
    </wf_estimated_runtime_config>
    <wf_workflow_version action="update_multiple" query="workflow=e5bdc68c0f76aa006c3005cce1050e93^sys_id!=00e657140f76ea006c3005cce1050e4b">
        <published>false</published>
    </wf_workflow_version>
</record_update>
